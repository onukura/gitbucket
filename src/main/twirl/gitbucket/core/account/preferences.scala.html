@(account: gitbucket.core.model.Account, currentTheme: String)(implicit context: gitbucket.core.controller.Context)
@gitbucket.core.html.main("Preferences", highlighterTheme = currentTheme){
  @gitbucket.core.account.html.menu("preferences", context.loginAccount.get.userName, false){
    <form method="POST" action="@context.path/@account.userName/_preferences/highlighter" validate="true" autocomplete="off">
      <div class="panel panel-default">
        <div class="panel-heading strong">Syntax Highlighter Theme</div>
        <div class="panel-body">
          <div class="row">
            <div class="col-md-4">
              <fieldset class="form-group">
                <label for="highlighterTheme" class="strong">Theme</label>
                <select id="highlighterTheme" name="highlighterTheme" class="form-control">
                @Seq(
                  ("a11y-dark", "A11y Dark"),
                  ("a11y-light", "A11y Light"),
                  ("agate", "Agate"),
                  ("an-old-hope", "An Old Hope"),
                  ("androidstudio", "Androidstudio"),
                  ("arduino-light", "Arduino Light"),
                  ("arta", "Arta"),
                  ("ascetic", "Ascetic"),
                  ("atelier-cave-dark", "Atelier Cave Dark"),
                  ("atelier-cave-light", "Atelier Cave Light"),
                  ("atelier-dune-dark", "Atelier Dune Dark"),
                  ("atelier-dune-light", "Atelier Dune Light"),
                  ("atelier-estuary-dark", "Atelier Estuary Dark"),
                  ("atelier-estuary-light", "Atelier Estuary Light"),
                  ("atelier-forest-dark", "Atelier Forest Dark"),
                  ("atelier-forest-light", "Atelier Forest Light"),
                  ("atelier-heath-dark", "Atelier Heath Dark"),
                  ("atelier-heath-light", "Atelier Heath Light"),
                  ("atelier-lakeside-dark", "Atelier Lakeside Dark"),
                  ("atelier-lakeside-light", "Atelier Lakeside Light"),
                  ("atelier-plateau-dark", "Atelier Plateau Dark"),
                  ("atelier-plateau-light", "Atelier Plateau Light"),
                  ("atelier-savanna-dark", "Atelier Savanna Dark"),
                  ("atelier-savanna-light", "Atelier Savanna Light"),
                  ("atelier-seaside-dark", "Atelier Seaside Dark"),
                  ("atelier-seaside-light", "Atelier Seaside Light"),
                  ("atelier-sulphurpool-dark", "Atelier Sulphurpool Dark"),
                  ("atelier-sulphurpool-light", "Atelier Sulphurpool Light"),
                  ("atom-one-dark-reasonable", "Atom One Dark Reasonable"),
                  ("atom-one-dark", "Atom One Dark"),
                  ("atom-one-light", "Atom One Light"),
                  ("brown-paper", "Brown Paper"),
                  ("codepen-embed", "Codepen Embed"),
                  ("color-brewer", "Color Brewer"),
                  ("darcula", "Darcula"),
                  ("dark", "Dark"),
                  ("default", "Default"),
                  ("docco", "Docco"),
                  ("dracula", "Dracula"),
                  ("far", "Far"),
                  ("foundation", "Foundation"),
                  ("github-gist", "Github Gist"),
                  ("github", "Github"),
                  ("gml", "Gml"),
                  ("googlecode", "Googlecode"),
                  ("gradient-dark", "Gradient Dark"),
                  ("gradient-light", "Gradient Light"),
                  ("grayscale", "Grayscale"),
                  ("gruvbox-dark", "Gruvbox Dark"),
                  ("gruvbox-light", "Gruvbox Light"),
                  ("hopscotch", "Hopscotch"),
                  ("hybrid", "Hybrid"),
                  ("idea", "Idea"),
                  ("ir-black", "Ir Black"),
                  ("isbl-editor-dark", "Isbl Editor Dark"),
                  ("isbl-editor-light", "Isbl Editor Light"),
                  ("kimbie.dark", "Kimbie.dark"),
                  ("kimbie.light", "Kimbie.light"),
                  ("lightfair", "Lightfair"),
                  ("lioshi", "Lioshi"),
                  ("magula", "Magula"),
                  ("mono-blue", "Mono Blue"),
                  ("monokai-sublime", "Monokai Sublime"),
                  ("monokai", "Monokai"),
                  ("night-owl", "Night Owl"),
                  ("nnfx-dark", "Nnfx Dark"),
                  ("nnfx", "Nnfx"),
                  ("nord", "Nord"),
                  ("obsidian", "Obsidian"),
                  ("ocean", "Ocean"),
                  ("paraiso-dark", "Paraiso Dark"),
                  ("paraiso-light", "Paraiso Light"),
                  ("pojoaque", "Pojoaque"),
                  ("purebasic", "Purebasic"),
                  ("qtcreator_dark", "Qtcreator_dark"),
                  ("qtcreator_light", "Qtcreator_light"),
                  ("railscasts", "Railscasts"),
                  ("rainbow", "Rainbow"),
                  ("routeros", "Routeros"),
                  ("school-book", "School Book"),
                  ("shades-of-purple", "Shades Of Purple"),
                  ("solarized-dark", "Solarized Dark"),
                  ("solarized-light", "Solarized Light"),
                  ("srcery", "Srcery"),
                  ("stackoverflow-dark", "Stackoverflow Dark"),
                  ("stackoverflow-light", "Stackoverflow Light"),
                  ("sunburst", "Sunburst"),
                  ("tomorrow-night-blue", "Tomorrow Night Blue"),
                  ("tomorrow-night-bright", "Tomorrow Night Bright"),
                  ("tomorrow-night-eighties", "Tomorrow Night Eighties"),
                  ("tomorrow-night", "Tomorrow Night"),
                  ("tomorrow", "Tomorrow"),
                  ("vs", "Vs"),
                  ("vs2015", "Vs2015"),
                  ("xcode", "Xcode"),
                  ("xt256", "Xt256"),
                  ("zenburn", "Zenburn")
                ).map{ theme =>
                  <option value="@theme._1"@if(theme._1 == currentTheme){ selected=""}>@theme._2</option>
                }
                </select>
              </fieldset>
              <input type="submit" class="btn btn-success" value="Save"/>
            </div>
            <div class="col-md-8">
              <div style="margin: 5px">
                <pre id="code-for-highlighter">
                    @{"""
                    |#include <iostream>
                    |
                    |using namespace std;
                    |
                    |int main(){
                    |  cout << 'Hello world.' << endl;
                    |  return 0;
                    |}
                    |""".stripMargin}
                </pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
    <script>
            $(function(){
              $('#highlighterTheme').change(function(evt) {
                var that = $(evt.target);
                var themeCss = $('link[rel="stylesheet"][href*="highlight.js/styles"]');
                var oldVal = new RegExp('highlight.js/styles/(.*?).css').exec(themeCss.attr('href'))[1];
                themeCss.attr('href', themeCss.attr('href').replace(oldVal, that.val()));
                $(document.body).removeClass(oldVal).addClass(that.val());
              });
              document.querySelectorAll('#code-for-highlighter').forEach(block => {
                // then highlight each
                hljs.highlightBlock(block);
                hljs.lineNumbersBlock(block);
              });
            });
    </script>
  }
}
